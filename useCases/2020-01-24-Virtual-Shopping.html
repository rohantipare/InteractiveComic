<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="google" content="notranslate"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Virtual Shopping-3D clothes fitting for Microsoft Kinect | Coldface Interactive</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Virtual Shopping-3D clothes fitting for Microsoft Kinect" />
<meta name="author" content="GitHub User" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This post is a synopsis of the technical challenges we faced while we worked on this project.This is an ongoing project &amp; there’s lot more work to be done. We want to share our experience based on the parts we have completed." />
<meta property="og:description" content="This post is a synopsis of the technical challenges we faced while we worked on this project.This is an ongoing project &amp; there’s lot more work to be done. We want to share our experience based on the parts we have completed." />
<meta property="og:site_name" content="Coldface Interactive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-01-24T00:00:00+05:30" />
<script type="application/ld+json">
{"headline":"Virtual Shopping-3D clothes fitting for Microsoft Kinect","dateModified":"2020-01-24T00:00:00+05:30","datePublished":"2020-01-24T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"/useCases/2020-01-24-Virtual-Shopping.html"},"author":{"@type":"Person","name":"GitHub User"},"description":"This post is a synopsis of the technical challenges we faced while we worked on this project.This is an ongoing project &amp; there’s lot more work to be done. We want to share our experience based on the parts we have completed.","url":"/useCases/2020-01-24-Virtual-Shopping.html","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!-- <script src="/assets/customScript.js"></script> --><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Coldface Interactive" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Coldface Interactive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
         <!--<a class="page-link" href="/blog.html">Blog</a><a class="page-link" href="/caseStudies.html">Case Studies</a><a class="page-link" href="/portfolio.html">Portfolio</a>-->
            <a class="page-link" href="/">Home</a>
            <a class="page-link" href="/portfolio">Portfolio</a>
            <a class="page-link" href="/caseStudies">Case Studies</a>
            <a class="page-link" href="/blog">Blog</a>
            <a class="page-link" href="/#contact">Contact</a>

        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry container" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Virtual Shopping-3D clothes fitting for Microsoft Kinect</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-01-24T00:00:00+05:30" itemprop="datePublished">
        Jan 24, 2020
      </time></p>
  </header>

  <div class="post-content e-content " itemprop="articleBody">
    <p>This post is a synopsis of the technical challenges we faced while we worked on this project.This is an ongoing project &amp; there’s lot more work to be done. We want to share our experience based on the parts we have completed.</p>

<p>Part 1- Clothes fitting (#Draping)</p>

<h3 id="problem-statement">Problem Statement</h3>

<ul>
  <li>The cloth meshes are created as per a reference #avatar i.e. they fit perfectly for a specific mesh, which is here on referred to as ‘Reference Avatar’ or RA.</li>
</ul>

<p><img src="/assets/postImages/UC-Draping/0.png" alt="Img1" class="center-image" /></p>

<ul>
  <li>As the clothes are modeled to fit the RA , so it wont fit a new avatar ( Refereed to as ‘Target Avatar’ or TA) which is different to the RA.</li>
  <li>The aim is to fit the 3d clothes mesh to any target avatar(TA) that is loaded into the system.</li>
</ul>

<p><img src="/assets/postImages/UC-Draping/0-2.png" alt="Img2" class="center-image" />
<img src="/assets/postImages/UC-Draping/0-3.png" alt="Img3" class="center-image" /></p>

<p>Note- The Reference Avatar was scanned in a multi-camera booth setup owned by the retail shopping chain which has commissioned this project. The 3d models of the clothes are scanned by another agency which works for the retail chain</p>

<h3 id="background">Background:</h3>

<ul>
  <li>Two main components: #3D scanned avatar &amp; 3D clothes. Both are #Skeletal #Meshes (i.e. both meshes deform as per the position of bones/rig.) Both of these meshes are independent. They are just placed on top of each other.</li>
  <li>The skeletons for both meshes (i.e. the bone positions) are controlled by the #Kinect gesture mirroring feature.</li>
</ul>

<h3 id="proposed-solution">Proposed Solution:</h3>

<ul>
  <li>To analyze the correlation of the cloth mesh with the RA, and apply the found relation on the cloth mesh; as per the new TA.</li>
  <li>The correlation refers to the, relative position (distance) of vertices of the cloth mesh; from the surface of the RA.</li>
  <li>The solution is to find the distance(X) between the vertices of cloth mesh, and the surface of the RA; and then modify the position of the vertices of the cloth mesh, so that the distance between the cloth mesh vertices and the surface of the TA is same as that of (X).
<img src="/assets/postImages/UC-Draping/0-4.png" alt="Img4" class="center-image" /></li>
</ul>

<h3 id="solution-architecture">Solution Architecture</h3>

<p><img src="/assets/postImages/UC-Draping/0-5.png" alt="Img5" class="center-image" /></p>

<h4 id="prerequisites">Prerequisites:</h4>

<ul>
  <li>For the #algorithm to work, the pose of the 3 meshes (i.e. RA, TA and the cloth mesh) needs to be same.</li>
</ul>

<h4 id="challenges">Challenges:</h4>

<ul>
  <li>
    <p>The prerequisite was not fulfilled, hence that needed to be solved first.
Note- The rigs in the given skeletal meshes were not aligned. None of them were in A or T pose , some were in A &amp; the other in T. Another issue was that the root bones of each rig were not in the same position for all the skeletal meshes.</p>
  </li>
  <li>
    <p>Lack of Unreal documentation, guides and usability issues.
Note- This was our first time working with Unreal or working on this type of problem statement. This project was initiated with another development team before it came to us &amp; they had already designed the blueprints which included some plugins that only worked with #Unreal Engine. We used their existing design flow &amp; developed this solution to bridge the gap. There too we had to develop fixes as there were major gaps in the design that needed to be managed.We would have used Unity, If it wasnt for those plug-ins.</p>
  </li>
</ul>

<h4 id="approach--progression">Approach &amp; Progression:</h4>

<ul>
  <li>First step was, to find a way (i.e. implementation) to move the vertices of a skeletal mesh at run-time. This needed 2-3 days as we had to get familiar with Unreal .</li>
  <li>Next step was to find the distance of an arbitrary point from the surface of a skeletal mesh. This needed the use of Ray tracing (i.e. a mechanism with which we can shoot a ray in 3D space, and find the intersection point at which the ray intersects with a surface). This took another 2 days.</li>
  <li>For the above to work we had to ensure that the prerequisite were in place. We had to find a way to control the bones through code (and not animation). This was the first challenge which we had to solve. We needed a couple of days to sort this out as it couldn’t be done with the skeletal meshes. There was no provision made to control bones using code. After 2 days we found another component called pose-able mesh, which supports skinned meshes; and allows bones to be controlled with code. It took us a day to modify the pose of the the RA, TA and clothes mesh so that all their poses were aligned to each other.</li>
  <li>That is when we faced the second challenge . The poses were consistent between meshes but pose-able meshes do not support ray tracing mechanism. We spent 2 more days for that but it didn’t work out.</li>
  <li>To ensure the algorithm worked, two things had to be in place (A) Bones should be controlled with code for matching poses (not supported by skeletal mesh) (B) Ray tracing mechanism should be used to find the intersection with the mesh surface (not supported by pose-able mesh).</li>
  <li>After another round of research we found that, bones in a skeletal mesh can be controlled using animation blueprints (it is a type of visual scripting, specifically used for handling animations - does not require coding). From there t took another 4 days to get the following outcomes : 1) To make the poses consistent using pose-able mesh (A) 2) To copy this pose to skeletal mesh through animation blueprint 3) To use ray tracing mechanism on skeletal mesh to analyze mesh(B).</li>
</ul>

<p>Now we could go ahead &amp; implement the actual algorithm.The actual algorithm took us 3 days to implement with bugs. Another week to polish and fix bugs.</p>

<p>The Algorithm worked out fine, thou we know there is a lot of scope for improvement. We hope to learn as the project progresses &amp; share our perspective with all interested parties.</p>

<p>to be continued NEXT: Part 2</p>

<p>Harold &amp; @rohan.tipare</p>

  </div><a class="u-url" href="/useCases/2020-01-24-Virtual-Shopping.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">GitHub User</li>
          <li><a class="u-email" href="mailto:info@coldfacearvr.com">info@coldfacearvr.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Coldface Interactive
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jekyll" title="jekyll"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/jekyllrb" title="jekyllrb"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>

</html>
